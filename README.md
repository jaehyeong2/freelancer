## 프리랜서 프로필 조회 서비스

### 모듈 구조
- core: 엔티티 / 도메인 서비스 존재
- client-api: 프리랜서를 구하는 클라이언트가 사용하는 api. core 모듈 의존
- freelancer-api: 프리랜서를 구하는 클라이언트가 사용하는 api. core 모듈 의존

  </br>

### 기술 스택
- java (jdk17)
- spring boot + jpa(maria db)
- query dsl
  
</br>



### 요구사항
1. 프리랜서를 등록일 / 프로필 조회 수 / 이름 순으로 정렬하여 조회할 수 있다.
2. 대량의 트래픽을 가정하여 프리랜서의 조회수가 업데이트 되게 한다. (실시간 반영은 필요 x) 

</br>

### 분석
- 프리랜서가 본인을 등록하는 쓰기 : 클라이언트가 프리랜서를 조회하는 읽기 비율 중 읽기 비율이 클 것이라고 가정한다.
- 등록일이 오래 지난 프리랜서 / 프로필 조회 수가 낮은 프리랜서의 경우 점점 조회 수 증가 비율이 줄어들 것이다.
- 프로필 조회수가 높은 프리랜서가 신규 프리랜서 / 조회수 낮은 프리랜서보다 조회수가 늘어날 확률이 높다고 가정한다.

</br>

### 해결 방안

scale-out 된 상황을 가정
</br>

1. 조회 시 마다 조회 수 컬럼 업데이트
- 대량 트래픽의 경우 성능 문제가 발생한다. 
</br>

2. 서버 메모리 저장 -> 일정 주기 db flush
- 낮은 가격으로 성능 개선이 가능하다.
- but, 인스턴스 간 동기화가 필요하다.
- but, 서버 사망 시 데이터 유실 위험이 존재한다.
</br>

3. redis에서 전체 조회 카운트 -> 일정 주기 db flush
- 디비 부하 감소는 감소 된다. 
- but, 모든 데이터를 레디스에 선 저장한다면 비용 대비 효과가 떨어진다.
</br>

4. 인기 프리랜서는 redis에 write-back / 일반 프리랜서는 db 업데이트
- 1대비 디비 부하 감소
- 전체 캐싱이 아니기 때문에 3 대비 레디스 관리 데이터가 감소한다.
</br>

### 구현

### 추가 고려사항
mq를 이용해서 조회 이벤트를 발행 하고 조회 수 업데이트 처리를 따로 분리 할 경우 조회 api 응답을 더욱 개선 할 수 있다.
